<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.AllSourceMapper">
  <resultMap id="AllSourceResultMap" type="com.model.AllSource">
    <result column="owner" jdbcType="VARCHAR" property="owner" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="line" jdbcType="INTEGER" property="line" />
    <result column="text" jdbcType="VARCHAR" property="text" />
  </resultMap>
  
  <select id="getAllSourceList" parameterType="Map" resultMap="AllSourceResultMap">
  	select * from all_source
  	<where>
  		<if test="owner!=null and owner!=''">
  			and owner in (#{owner})
  		</if>
  		<if test="type!=null and type!=''">
  			and type=#{type}
  		</if>
  		<if test="name!=null and name!=''">
  			and name=#{name}
  		</if>
  	</where>
  	order by line
  </select>
  
  <select id="getGroupList" parameterType="Map" resultMap="AllSourceResultMap">
  	select owner, type, name from all_source 
  	<where>
  		<if test="owner!=null and owner!=''">
  			and owner in (#{owner})
  		</if>
  	</where>
  	group by owner, type, name 
  	order by type
  </select>
</mapper>